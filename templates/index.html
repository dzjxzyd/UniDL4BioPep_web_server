<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UniDL4BioPep - Universal Deep Learning for Bioactive Peptide Prediction</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh; color: #333; overflow-x: hidden;
        }
        /* Background Animation */
        body::before {
            content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.03)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>') repeat;
            z-index: -1; animation: float 20s ease-in-out infinite;
        }
        @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-20px); } }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { text-align: center; margin-bottom: 3rem; position: relative; }
        .header::before {
            content: ''; position: absolute; top: -50px; left: 50%; transform: translateX(-50%);
            width: 200px; height: 200px; background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            border-radius: 50%; animation: pulse 3s ease-in-out infinite;
        }
        @keyframes pulse { 0%, 100% { transform: translateX(-50%) scale(1); opacity: 0.5; } 50% { transform: translateX(-50%) scale(1.1); opacity: 0.8; } }
        h1 { color: white; font-size: 3rem; font-weight: 700; margin-bottom: 1rem; text-shadow: 0 4px 20px rgba(0,0,0,0.3); position: relative; z-index: 1; }
        .subtitle { color: rgba(255,255,255,0.9); font-size: 1.1rem; font-weight: 300; margin-bottom: 0.5rem; max-width: 800px; margin-left: auto; margin-right: auto; }
        .notice { color: rgba(255,255,255,0.8); font-size: 0.9rem; margin-bottom: 2rem; background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 10px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); }
        .card { background: rgba(255,255,255,0.95); backdrop-filter: blur(20px); border-radius: 20px; padding: 2rem; margin-bottom: 2rem; box-shadow: 0 20px 40px rgba(0,0,0,0.1); border: 1px solid rgba(255,255,255,0.3); transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 30px 60px rgba(0,0,0,0.15); }
        .card-header { display: flex; align-items: center; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 2px solid rgba(102,126,234,0.1); }
        .card-icon { width: 50px; height: 50px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 15px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem; margin-right: 1rem; box-shadow: 0 10px 20px rgba(102,126,234,0.3); }
        .card-title { font-size: 1.5rem; font-weight: 600; color: #2d3748; }
        .demo-section { background: linear-gradient(135deg, #e8f4f8, #f0f8f0); border-radius: 15px; padding: 1.5rem; margin: 1.5rem 0; border-left: 4px solid #667eea; }
        .demo-title { font-weight: 600; color: #2d3748; margin-bottom: 1rem; display: flex; align-items: center; }
        .demo-title i { margin-right: 0.5rem; color: #667eea; }
        .form-group { margin-bottom: 1.5rem; }
        .form-label { display: block; font-weight: 500; color: #4a5568; margin-bottom: 0.5rem; }
        .form-select, .form-input {
            width: 100%; padding: 0.75rem 1rem; border: 2px solid #e2e8f0; border-radius: 10px; font-size: 1rem; background: white; transition: all 0.3s ease;
        }
        .form-select:focus, .form-input:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102,126,234,0.1); }
        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; padding: 0.75rem 2rem; border-radius: 10px;
            font-size: 1rem; font-weight: 500; cursor: pointer; transition: all 0.3s ease; text-decoration: none; display: inline-flex; align-items: center; gap: 0.5rem;
            box-shadow: 0 10px 20px rgba(102,126,234,0.3);
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 15px 30px rgba(102,126,234,0.4); }
        .btn-block { width: 100%; justify-content: center; }
        .checkbox-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 0.75rem; margin-top: 1rem; }
        .checkbox-item { display: flex; align-items: center; padding: 0.75rem; background: rgba(102,126,234,0.05); border-radius: 10px; transition: all 0.3s ease; border: 2px solid transparent; }
        .checkbox-item:hover { background: rgba(102,126,234,0.1); border-color: rgba(102,126,234,0.2); }
        .checkbox-item input[type="checkbox"] { width: 20px; height: 20px; margin-right: 0.75rem; accent-color: #667eea; }
        .file-upload {
            border: 2px dashed #667eea; border-radius: 10px; padding: 2rem; text-align: center; background: rgba(102,126,234,0.05);
            transition: all 0.3s ease; cursor: pointer;
        }
        .file-upload:hover { background: rgba(102,126,234,0.1); border-color: #764ba2; }
        .file-upload i { font-size: 2rem; color: #667eea; margin-bottom: 1rem; }
        /* DRAG&DROP: highlight when dragging over */
        .file-upload.dragover { background: rgba(102,126,234,0.12); border-color: #764ba2; }
        .result-display { background: rgba(16,185,129,0.1); border: 1px solid rgba(16,185,129,0.2); border-radius: 10px; padding: 1rem; margin-top: 1rem; color: #065f46; font-family: 'Courier New', monospace; }
        .architecture-img { width: 100%; max-width: 950px; height: auto; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); margin: 2rem 0; }
        .dataset-table { width: 100%; border-collapse: collapse; margin-top: 1rem; border-radius: 10px; overflow: hidden; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .dataset-table th { background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 1rem; text-align: left; font-weight: 600; }
        .dataset-table td { padding: 1rem; border-bottom: 1px solid #e2e8f0; background: white; }
        .dataset-table tr:nth-child(even) td { background: #f7fafc; }
        .model-options { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 1rem 0; }
        .model-card { background: white; border: 2px solid #e2e8f0; border-radius: 10px; padding: 1rem; text-align: center; transition: all 0.3s ease; cursor: pointer; }
        .model-card:hover { border-color: #667eea; box-shadow: 0 5px 15px rgba(102,126,234,0.2); }
        .model-card.selected { border-color: #667eea; background: rgba(102,126,234,0.05); }
        .usage-steps { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin: 1.5rem 0; }
        .step-card { background: white; border-radius: 10px; padding: 1rem; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.08); position: relative; transition: transform 0.3s ease; }
        .step-card:hover { transform: translateY(-3px); }
        .step-number { position: absolute; top: -12px; left: 50%; transform: translateX(-50%); width: 24px; height: 24px; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.8rem; }
        .step-card i { font-size: 1.5rem !important; color: #667eea; margin-bottom: 0.5rem; }
        .step-card h3 { font-size: 0.9rem; margin-bottom: 0.3rem; color: #2d3748; }
        .step-card p { font-size: 0.75rem; color: #666; margin: 0; }
        @media (max-width: 768px) { h1 { font-size: 2rem; } .card { padding: 1.5rem; } .checkbox-grid { grid-template-columns: 1fr; } .model-options { grid-template-columns: 1fr; } }
        .loading { display: none; text-align: center; color: #667eea; }
        .spinner {
            border: 3px solid rgba(102,126,234,0.3); border-radius: 50%; border-top: 3px solid #667eea;
            width: 30px; height: 30px; animation: spin 1s linear infinite; margin: 0 auto 1rem;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>UniDL4BioPep</h1>
            <p class="subtitle">Universal Deep Learning Architecture for Bioactive Peptide Prediction</p>
            <div class="notice">
                <p>ğŸ”¬ Implementation of <a href="https://academic.oup.com/bib/article/24/3/bbad135/7107929" target="_blank" style="color: white; text-decoration: underline;">"UniDL4BioPep: a universal deep learning architecture for binary classification in peptide bioactivity"</a> (Briefings in Bioinformatics, 2023)</p>
                <p>ğŸ“§ For large dataset processing, contact: zhenjiao.du@ucd.ie or yonghui@ksu.edu</p>
            </div>
        </div>

        <!-- Quick Prediction Card -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon"><i class="fas fa-bolt"></i></div>
                <h2 class="card-title">Quick Prediction</h2>
            </div>
            <div class="usage-steps">
                <div class="step-card"><div class="step-number">1</div><i class="fas fa-cogs"></i><h3>Select Model</h3><p>Choose prediction model</p></div>
                <div class="step-card"><div class="step-number">2</div><i class="fas fa-keyboard"></i><h3>Input Sequence</h3><p>Enter peptide sequence</p></div>
                <div class="step-card"><div class="step-number">3</div><i class="fas fa-play"></i><h3>Run Analysis</h3><p>Get instant results</p></div>
            </div>
            <form id="quickForm" action="{{url_for('predict')}}" method="post">
                <div class="form-group">
                    <label class="form-label"><i class="fas fa-microscope"></i> Choose Prediction Model:</label>
                    <select name="Model_selection" class="form-select" required>
                        <option value="1">ğŸ©º Antihypertensive</option>
                        <option value="2">ğŸ’Š DPPIV Inhibitory</option>
                        <option value="3">ğŸ˜– Bitter Taste</option>
                        <option value="4">ğŸ˜‹ Umami Taste</option>
                        <option value="5">ğŸ¦  Antimicrobial</option>
                        <option value="6">ğŸ¦Ÿ Antimalarial (Alternative)</option>
                        <option value="7">ğŸ¦Ÿ Antimalarial (Main)</option>
                        <option value="8">ğŸ“¡ Quorum Sensing</option>
                        <option value="9">ğŸ¯ Anticancer (Alternative)</option>
                        <option value="10">ğŸ¯ Anticancer (Main)</option>
                        <option value="11">ğŸ”¬ Anti-MRSA</option>
                        <option value="12">ğŸ§¬ Tumor T-cell Antigens</option>
                        <option value="13">ğŸ§  Blood-Brain Barrier</option>
                        <option value="14">ğŸ¦  Anti-parasitic</option>
                        <option value="15">âš¡ Neuropeptide</option>
                        <option value="16">ğŸ›¡ï¸ Antibacterial</option>
                        <option value="17">ğŸ„ Antifungal</option>
                        <option value="18">ğŸ›¡ï¸ Antiviral</option>
                        <option value="19">â˜ ï¸ Toxicity</option>
                        <option value="20">ğŸŒ¿ Antioxidant</option>
                        <option value="21">âš ï¸ Allergen</option>
                        <option value="22">ğŸ“¥ Cell Penetrating</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label"><i class="fas fa-dna"></i> Peptide Sequences:</label>
                    <input type="text" name="Peptide_sequences" class="form-input" placeholder="Enter sequences separated by commas (e.g., VPP,IPP,CCL,AGR)" required />
                </div>
                <button type="submit" class="btn btn-block"><i class="fas fa-rocket"></i>Run Prediction</button>
                <div class="loading" id="loading"><div class="spinner"></div><p>Processing your sequences...</p></div>
                <div class="result-display" id="result" {% if prediction_text %}style="display: block;"{% else %}style="display: none;"{% endif %}>
                    <div id="prediction_text">{{ prediction_text }}</div>
                </div>
            </form>
        </div>

        <!-- Batch Prediction Card -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon"><i class="fas fa-upload"></i></div>
                <h2 class="card-title">Batch Prediction</h2>
            </div>
            <div class="usage-steps">
                <div class="step-card"><div class="step-number">1</div><i class="fas fa-file-upload"></i><h3>Upload File</h3><p>Excel, FASTA, or TXT</p></div>
                <div class="step-card"><div class="step-number">2</div><i class="fas fa-check-square"></i><h3>Select Models</h3><p>Choose multiple models</p></div>
                <div class="step-card"><div class="step-number">3</div><i class="fas fa-download"></i><h3>Download Results</h3><p>Get comprehensive report</p></div>
            </div>

            <form id="batchForm" action="{{url_for('pred_with_file')}}" method="post" enctype="multipart/form-data">
                <div class="form-group">
                    <label class="form-label"><i class="fas fa-file-alt"></i> Upload File:</label>

                    <!-- DRAG&DROP: add id="dropZone" -->
                    <div class="file-upload" id="dropZone" onclick="document.getElementById('fileInput').click()">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p id="fileLabel"><strong>Click to upload</strong> or drag &amp; drop</p>
                        <p style="font-size: 0.9rem; color: #666;">Supports: .xls, .xlsx, .txt, .fasta</p>
                        <input type="file" id="fileInput" name="Peptide_sequences"
                               accept=".xls,.xlsx,.txt,.fasta" style="display: none;" required />
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label"><i class="fas fa-list-check"></i> Select Prediction Models:</label>
                    <div class="checkbox-grid">
                        <div class="checkbox-item"><input type="checkbox" name="Model_selection" value="1" checked id="model1"><label for="model1">ğŸ©º Antihypertensive</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="Model_selection" value="2" id="model2"><label for="model2">ğŸ’Š DPPIV Inhibitory</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="Model_selection" value="3" id="model3"><label for="model3">ğŸ˜– Bitter Taste</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="Model_selection" value="4" id="model4"><label for="model4">ğŸ˜‹ Umami Taste</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="Model_selection" value="5" id="model5"><label for="model5">ğŸ¦  Antimicrobial</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="Model_selection" value="6" id="model6"><label for="model6">ğŸ¦Ÿ Antimalarial (Alt)</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="Model_selection" value="7" id="model7"><label for="model7">ğŸ¦Ÿ Antimalarial (Main)</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="Model_selection" value="8" id="model8"><label for="model8">ğŸ“¡ Quorum Sensing</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="Model_selection" value="9" id="model9"><label for="model9">ğŸ¯ Anticancer (Alt)</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="Model_selection" value="10" id="model10"><label for="model10">ğŸ¯ Anticancer (Main)</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="Model_selection" value="11" id="model11"><label for="model11">ğŸ”¬ Anti-MRSA</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="Model_selection" value="12" id="model12"><label for="model12">ğŸ§¬ Tumor T-cell</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="Model_selection" value="13" id="model13"><label for="model13">ğŸ§  Blood-Brain Barrier</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="Model_selection" value="14" id="model14"><label for="model14">ğŸ¦  Anti-parasitic</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="Model_selection" value="15" id="model15"><label for="model15">âš¡ Neuropeptide</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="Model_selection" value="16" id="model16"><label for="model16">ğŸ›¡ï¸ Antibacterial</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="Model_selection" value="17" id="model17"><label for="model17">ğŸ„ Antifungal</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="Model_selection" value="18" id="model18"><label for="model18">ğŸ›¡ï¸ Antiviral</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="Model_selection" value="19" id="model19"><label for="model19">â˜ ï¸ Toxicity</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="Model_selection" value="20" id="model20"><label for="model20">ğŸŒ¿ Antioxidant</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="Model_selection" value="21" id="model21"><label for="model21">âš ï¸ Allergen</label></div>
                        <div class="checkbox-item"><input type="checkbox" name="Model_selection" value="22" id="model22"><label for="model22">ğŸ“¥ Cell Penetrating</label></div>
                    </div>
                </div>

                <button type="submit" class="btn btn-block"><i class="fas fa-play-circle"></i>Process Batch Prediction</button>
            </form>
        </div>

        <!-- Result Explanation Card -->
        <div class="card">
            <div class="card-header"><div class="card-icon"><i class="fas fa-chart-line"></i></div><h2 class="card-title">Result Interpretation</h2></div>
            <p style="font-size: 0.9rem; color: #666; margin-bottom: 1.5rem;">Based on Sigmoid Probability Output</p>
            <div class="demo-section">
                <div class="demo-title"><i class="fas fa-table"></i>Example Output</div>
                <div style="overflow-x: auto; margin: 1rem 0;">
                    <table style="width: 100%; border-collapse: collapse; border-radius: 10px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                        <thead>
                            <tr style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">
                                <th style="padding: 1rem; text-align: left; font-weight: 600;">Sequence</th>
                                <th style="padding: 1rem; text-align: center; font-weight: 600;">Predicted Class</th>
                                <th style="padding: 1rem; text-align: center; font-weight: 600;">Probability</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="background: white;">
                                <td style="padding: 1rem; font-family: 'Courier New', monospace; font-weight: 600; color: #2d3748;">QKTAP</td>
                                <td style="padding: 1rem; text-align: center;"><span style="background: #10b981; color: white; padding: 0.3rem 0.8rem; border-radius: 15px; font-size: 0.85rem; font-weight: 500;">active</span></td>
                                <td style="padding: 1rem; text-align: center; font-family: 'Courier New', monospace; font-weight: 600; color: #10b981;">0.981 (98.1%)</td>
                            </tr>
                            <tr style="background: #f7fafc;">
                                <td style="padding: 1rem; font-family: 'Courier New', monospace; font-weight: 600; color: #2d3748;">NNWNG</td>
                                <td style="padding: 1rem; text-align: center;"><span style="background: #ef4444; color: white; padding: 0.3rem 0.8rem; border-radius: 15px; font-size: 0.85rem; font-weight: 500;">non-active</span></td>
                                <td style="padding: 1rem; text-align: center; font-family: 'Courier New', monospace; font-weight: 600; color: #ef4444;">0.045 (4.5%)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div style="background: rgba(102,126,234,0.1); border-left: 4px solid #667eea; padding: 1.5rem; border-radius: 0 10px 10px 0; margin-top: 1.5rem;">
                    <h4 style="color: #2d3748; margin-bottom: 1rem; display: flex; align-items: center;"><i class="fas fa-lightbulb" style="color: #667eea; margin-right: 0.5rem;"></i>Probability Interpretation</h4>
                    <ul style="margin: 0; padding-left: 1.5rem; line-height: 1.6;">
                        <li><strong>0.981</strong> means the model is <strong>98.1% confident</strong> that QKTAP is active</li>
                        <li><strong>0.045</strong> means the model is <strong>4.5% confident</strong> that NNWNG is active, so it is classified as <strong>non-active</strong></li>
                    </ul>
                </div>
                <div style="background: rgba(251,191,36,0.1); border-left: 4px solid #f59e0b; padding: 1.5rem; border-radius: 0 10px 10px 0; margin-top: 1rem;">
                    <h4 style="color: #2d3748; margin-bottom: 1rem; display: flex; align-items: center;"><i class="fas fa-exclamation-triangle" style="color: #f59e0b; margin-right: 0.5rem;"></i>Sigmoid Function Note</h4>
                    <p style="margin: 0; font-size: 0.9rem; line-height: 1.6; color: #4a5568;">
                        The sigmoid curve flattens as probability approaches 0 or 1, so improving confidence near extremes requires increasingly large changes in the model score. The difference between <strong>98.1%</strong> and <strong>99.1%</strong> represents a much larger improvement than the same 1% gain at mid-range probabilities (like 71% and 70%).
                    </p>
                </div>
            </div>
        </div>

        <!-- Model Architecture Card -->
        <div class="card">
            <div class="card-header"><div class="card-icon"><i class="fas fa-sitemap"></i></div><h2 class="card-title">Model Architecture</h2></div>
            <div style="text-align: center;">
                <img src="static/css/Whole architecture.png" alt="UniDL4BioPep Architecture" class="architecture-img" />
                <p style="font-style: italic; color: #666; margin-top: 1rem;">Universal deep learning architecture for bioactive peptide prediction</p>
            </div>
        </div>
        <!-- Dataset Information Card -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon">
                    <i class="fas fa-database"></i>
                </div>
                <h2 class="card-title">Training Datasets</h2>
            </div>
            <div style="overflow-x: auto;">
                <table class="dataset-table">
                    <thead>
                        <tr>
                            <th>Bioactivity</th>
                            <th>Training Dataset</th>
                            <th>Test Dataset</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ACE inhibitory activity</td>
                            <td>913 positives and 913 negatives</td>
                            <td>386 positives and 386 negatives</td>
                        </tr>
                        <tr>
                            <td>DPP IV inhibitory activity</td>
                            <td>532 positives and 532 negatives</td>
                            <td>133 positives and 133 negatives</td>
                        </tr>
                        <tr>
                            <td>Bitter</td>
                            <td>256 positives and 256 negatives</td>
                            <td>64 positives and 64 negatives</td>
                        </tr>
                        <tr>
                            <td>Umami</td>
                            <td>112 positives and 241 negatives</td>
                            <td>28 positives and 61 negatives</td>
                        </tr>
                        <tr>
                            <td>Antimicrobial activity</td>
                            <td>3876 positives and 9552 negatives</td>
                            <td>2584 positives and 6369 negatives</td>
                        </tr>
                        <tr>
                            <td>Antimalarial activity</td>
                            <td>Main: 111 positives, 1708 negatives<br>Alternative: 111 positives, 542 negatives</td>
                            <td>Main: 28 positives, 427 negatives<br>Alternative: 28 positives, 135 negatives</td>
                        </tr>
                        <tr>
                            <td>Quorum sensing activity</td>
                            <td>200 positives and 200 negatives</td>
                            <td>20 positives and 20 negatives</td>
                        </tr>
                        <tr>
                            <td>Anticancer activity</td>
                            <td>Main: 689 positives, 689 negatives<br>Alternative: 776 positives, 776 negatives</td>
                            <td>Main: 172 positives, 172 negatives<br>Alternative: 194 positives, 194 negatives</td>
                        </tr>
                        <tr>
                            <td>Anti-MRSA strains activity</td>
                            <td>118 positives and 678 negatives</td>
                            <td>30 positives and 169 negatives</td>
                        </tr>
                        <tr>
                            <td>Tumor T cell antigens</td>
                            <td>470 positives and 318 negatives</td>
                            <td>122 positives and 75 negatives</td>
                        </tr>
                        <tr>
                            <td>Blood-Brain Barrier</td>
                            <td>100 positives and 100 negatives</td>
                            <td>19 positives and 19 negatives</td>
                        </tr>
                        <tr>
                            <td>Anti-parasitic activity</td>
                            <td>255 positives and 255 negatives</td>
                            <td>46 positives and 46 negatives</td>
                        </tr>
                        <tr>
                            <td>Neuropeptide</td>
                            <td>1940 positives and 1940 negatives</td>
                            <td>485 positives and 485 negatives</td>
                        </tr>
                        <tr>
                            <td>Antibacterial activity</td>
                            <td>6583 positives and 6583 negatives</td>
                            <td>1695 positives and 1695 negatives</td>
                        </tr>
                        <tr>
                            <td>Antifungal activity</td>
                            <td>778 positives and 778 negatives</td>
                            <td>215 positives and 215 negatives</td>
                        </tr>
                        <tr>
                            <td>Antiviral activity</td>
                            <td>2321 positives and 2321 negatives</td>
                            <td>623 positives and 623 negatives</td>
                        </tr>
                        <tr>
                            <td>Toxicity</td>
                            <td>1642 positives and 1642 negatives</td>
                            <td>290 positives and 290 negatives</td>
                        </tr>
                        <tr>
                            <td>Antioxidant activity</td>
                            <td>582 positives and 541 negatives</td>
                            <td>146 positives and 135 negatives</td>
                        </tr>
                        <tr>
                            <td>Allergen</td>
                            <td>Data available upon request</td>
                            <td>Data available upon request</td>
                        </tr>
                        <tr>
                            <td>Cell Penetrating Peptide</td>
                            <td>Data available upon request</td>
                            <td>Data available upon request</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
    </div>

    <script>
        // ============ å·¥å…·ï¼šé‡ç½®â€œProcess Batch Predictionâ€æŒ‰é’® ============
        function resetBatchButton() {
            const btn = document.querySelector('#batchForm button[type="submit"]');
            if (btn) {
                btn.disabled = false;
                btn.innerHTML = '<i class="fas fa-play-circle"></i> Process Batch Prediction';
            }
        }

        // ============ File uploadï¼ˆåªæ›´æ–°æ–‡å­—ï¼Œä¸é‡å»º input èŠ‚ç‚¹ï¼‰ ============
        const fileInput = document.getElementById('fileInput');
        const dropZone  = document.getElementById('dropZone');
        const fileLabel = document.getElementById('fileLabel'); // ä½ åœ¨ HTML é‡ŒåŠ çš„ <p id="fileLabel">...</p>

        if (fileInput) {
            fileInput.addEventListener('change', function (e) {
                // â‘  æ¯æ¬¡æ–‡ä»¶å˜æ›´å…ˆé‡ç½®æŒ‰é’®çŠ¶æ€ï¼ˆå…³é”®ä¿®å¤ï¼‰
                resetBatchButton();

                const fileName = e.target.files && e.target.files[0] ? e.target.files[0].name : '';
                if (fileLabel) {
                    if (fileName) {
                        fileLabel.innerHTML = `<strong>File selected:</strong> ${fileName}`;
                        if (dropZone) {
                            const icon = dropZone.querySelector('i');
                            if (icon) { icon.className = 'fas fa-check-circle'; icon.style.color = '#10b981'; }
                        }
                    } else {
                        fileLabel.innerHTML = `<strong>Click to upload</strong> or drag &amp; drop`;
                        if (dropZone) {
                            const icon = dropZone.querySelector('i');
                            if (icon) { icon.className = 'fas fa-cloud-upload-alt'; icon.style.color = ''; }
                        }
                    }
                }
            });
        }

        // ============ Quick form loadingï¼ˆåŸæ ·ä¿ç•™ï¼‰ ============
        document.getElementById('quickForm').addEventListener('submit', function(e) {
            const loading = document.getElementById('loading');
            const result = document.getElementById('result');
            loading.style.display = 'block';
            result.style.display = 'none';
        });

        // ============ Checkbox é€‰ä¸­æ€ï¼ˆä¿ç•™ä½ çš„äº¤äº’å†™æ³•ï¼‰ ============
        document.querySelectorAll('.checkbox-item').forEach(item => {
            item.addEventListener('click', function(e) {
                if (e.target.type !== 'checkbox') {
                    const checkbox = this.querySelector('input[type="checkbox"]');
                    checkbox.checked = !checkbox.checked;
                }
                this.classList.toggle('selected', this.querySelector('input[type="checkbox"]').checked);
            });
        });
        document.querySelectorAll('.checkbox-item input[type="checkbox"]:checked').forEach(checkbox => {
            checkbox.closest('.checkbox-item').classList.add('selected');
        });

        // ============ Batch form æ ¡éªŒï¼ˆä¿ç•™ä½ çš„é€»è¾‘ï¼‰ ============
        document.getElementById('batchForm').addEventListener('submit', function(e) {
            const checkedModels = document.querySelectorAll('input[name="Model_selection"]:checked');

            if (!fileInput.files || fileInput.files.length === 0) {
                e.preventDefault();
                alert('Please select a file to upload.');
                return false;
            }
            if (checkedModels.length === 0) {
                e.preventDefault();
                alert('Please select at least one prediction model.');
                return false;
            }

            const submitButton = this.querySelector('button[type="submit"]');
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
            submitButton.disabled = true;
            // å…œåº•ï¼š20 ç§’åæ— è®ºå¦‚ä½•å¤ä½ï¼ˆå¯æŒ‰éœ€è¦è°ƒæ•´æ—¶é•¿ï¼‰
            clearTimeout(window._batchResetTimer);
            window._batchResetTimer = setTimeout(() => {
                resetBatchButton();
            }, 20000);
        });

        // ============ Drag & Dropï¼ˆä¸è‡ªåŠ¨æäº¤ï¼Œä¸é‡å»º DOMï¼‰ ============
        (function () {
            if (!dropZone || !fileInput) return;

            // é˜²æ­¢æµè§ˆå™¨é»˜è®¤æ‰“å¼€æ–‡ä»¶
            ['dragover', 'drop'].forEach(evt => {
                window.addEventListener(evt, e => e.preventDefault());
            });

            const highlight   = () => dropZone.classList.add('dragover');
            const unhighlight = () => dropZone.classList.remove('dragover');

            ['dragenter', 'dragover'].forEach(evt => {
                dropZone.addEventListener(evt, e => { e.preventDefault(); e.stopPropagation(); highlight(); });
            });
            ['dragleave', 'dragend', 'drop'].forEach(evt => {
                dropZone.addEventListener(evt, e => { e.preventDefault(); e.stopPropagation(); unhighlight(); });
            });

            dropZone.addEventListener('drop', e => {
                // â‘¡ æ‹–æ‹½åˆ°æ­¤ï¼šæŠŠæ–‡ä»¶â€œçŒå…¥â€éšè— inputï¼Œç„¶åè§¦å‘ changeï¼ˆä¼šè°ƒç”¨ resetBatchButtonï¼‰
                const files = e.dataTransfer && e.dataTransfer.files ? e.dataTransfer.files : null;
                if (!files || files.length === 0) return;

                const dt = new DataTransfer();
                for (const f of files) dt.items.add(f);
                fileInput.files = dt.files;

                fileInput.dispatchEvent(new Event('change'));

                // â‘¢ å¦‚æœä½ ä¸æƒ³è‡ªåŠ¨æäº¤ï¼Œè¯·åŠ¡å¿…ä¸è¦è°ƒç”¨ requestSubmit()
                // document.getElementById('batchForm').requestSubmit(); // â† ç¡®è®¤è¿™è¡Œä¸å­˜åœ¨æˆ–è¢«æ³¨é‡Š
            });
        })();

        // ============ é¡µé¢åˆæ¬¡åŠ è½½æ—¶ä¹Ÿé‡ç½®ä¸€æ¬¡æŒ‰é’®ï¼ˆä¿é™©ï¼‰ ============
        resetBatchButton();
    </script>

</body>
</html>
